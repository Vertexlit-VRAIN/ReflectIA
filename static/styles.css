/* ===================== Flat Theme ===================== */
:root{
  --bg:#0f0f10;
  --panel:#151517;
  --panel-2:#1a1a1d;
  --ink:#e8e8ea;
  --ink-2:#cfcfd4;
  --muted:#a7a7ad;
  --line:#2a2a30;
  --accent:#6b3df2;
  --accent-strong:#4d2cd9;
  --radius:12px;
}

body{
  background: #0f0f10 !important;
  color: var(--ink) !important;
}

/* Center the app */
.gradio-container{
  width: min(1100px, 92vw);
  margin: 26px auto 40px !important;
  color:var(--ink);
  --block-border-width:0;
}

/* ===================== Typography ===================== */
.gradio-container,
.gradio-container p,
.gradio-container div,
.gradio-container span,
.gradio-container label,
.gr-form,
.gr-textbox,
.gr-dropdown,
.gr-button { font-size: 1rem !important; }

.gr-markdown,
.gr-markdown p { font-size: 1.12rem !important; line-height: 1.65 !important; }

.gr-markdown h1,.gr-markdown h2,.gr-markdown h3{ color:var(--ink) !important; }

/* Section headings */
.tab-heading{
  margin: 4px 0 12px !important;
  padding: 10px 16px !important;
  background: #17171a !important;
  /* border-radius: var(--radius) !important; */
  /* border: 1px solid var(--line) !important; */
}
.section-title{
  margin: 4px 0 2px !important;
  font-weight: 700 !important;
  letter-spacing:.2px !important;
  color: var(--ink) !important;
}

/* ===================== Tabs ===================== */
.main-tabs [role="tab"]{
  background: var(--panel) !important;
  color: #d8d8d8 !important;
  border: 1px solid var(--line) !important;
  border-bottom: none !important;
  border-radius: 10px 10px 0 0 !important;
  padding: 10px 28px !important;
  font-weight: 600 !important;
  transition: transform .15s ease !important;
  font-size: 1.06rem !important;
  margin-right: 8px !important;
}

.main-tabs [role="tab"][aria-selected="true"]{
  background: var(--accent) !important;  /* flat accent */
  color:#fff !important;
  border-color: var(--accent) !important;
  transform: translateY(1px);
  z-index:2 !important;
}

.main-tabs [role="tabpanel"]{
  background: var(--panel-2) !important;
  border: 1px solid var(--line) !important;
  border-top: 0 !important;
  border-radius: 0 12px 12px 12px !important;
  padding: 18px 18px 26px !important;
}

.gr-accordion:first-child,
.gradio-container > div:first-child{ margin-top: 24px !important; }

/* ===================== Buttons ===================== */
.purple-button,
button[variant="primary"], .gr-button-primary, button.primary{
  background: var(--accent) !important;     /* flat */
  border-color: var(--accent) !important;
  color:#fff !important;
  border-radius: 12px !important;
}
.purple-button:hover,
button[variant="primary"]:hover,
.gr-button-primary:hover, button.primary:hover{
  background: var(--accent-strong) !important;
  border-color: var(--accent-strong) !important;
}

/* ===================== Inputs ===================== */
.visible-dropdown select,
.visible-dropdown input,
.visible-dropdown .gr-box,
.visible-dropdown .wrap{
  background: #2b2b2f !important;
  color:#fff !important;
  border: 1px solid var(--line) !important;
  border-radius:10px !important;
}

.gr-dropdown .wrap, .gr-textbox .wrap{ border-radius:10px !important; }

.emphasized-input input,
.emphasized-input textarea{
  background:#1b1b1e !important;
  color:#fff !important;
  border: 2px solid #323238 !important;
  border-radius: 12px !important;
  transition: border-color .15s ease, box-shadow .15s ease !important;
}
.emphasized-input input:hover, .emphasized-input textarea:hover{ border-color:#6d60f7 !important; }
.emphasized-input input:focus, .emphasized-input textarea:focus{
  border-color: var(--accent) !important;
  outline: none !important;
}

/* Info/help text */
.with-info .form-info,
.with-info .wrap .info,
.gradio-container .form-info,
.gradio-container .wrap .info,
.gradio-container [data-testid="block-info"],
.gradio-container .gr-help{
  margin: 8px 0 10px !important;
  padding: 10px 14px !important;
  background: #1a1a1d !important;
  border: 1px solid var(--line) !important;
  color: var(--ink-2) !important;
  border-radius: 8px !important;
  display:block !important;
  font-size:1.05rem !important;
}

/* ===================== Cards & Panels ===================== */
.section-card{
  background: #1b1b1e !important;    /* flat */
  border: 1px solid var(--line) !important;
  border-radius: var(--radius) !important;
  padding: 14px !important;
}

/* Upload block */
.large-upload-button{
  border: 2px dashed var(--accent) !important;
  border-radius: 12px !important;
  background: #17171a !important;    /* flat */
  transition: all .2s ease !important;
}
.large-upload-button:hover{
  background: #1d1d21 !important;
  border-color: var(--accent-strong) !important;
}

/* Thumbnails */
.thumbnail-container{
  border-radius: 8px !important;
  overflow: hidden !important;
  box-shadow: 0 2px 8px rgba(0,0,0,.18) !important;
  transition: transform .2s ease !important;
}
.thumbnail-container:hover{ transform: scale(1.02) !important; }

/* Align dropdowns with thumbnails */
.thumbline{
  display:flex !important;
  align-items:center !important;
  gap:12px !important;
}
.vcenter-col{
  display:flex !important;
  flex-direction:column !important;
  justify-content:center !important;
}

/* ===================== Analyze Bar ===================== */
.analyze-bar{
  display:flex !important;
  justify-content:center !important;
  gap: 12px !important;
  margin-top: 10px !important;
}
.analyze-cta{
  display:block !important;
  margin: 0 auto !important;
  min-width: 220px !important;
  font-weight: 700 !important;
}

/* Minimal hint */
.status-message{
  margin: 0 !important;
  padding: 6px 10px !important;
  border-radius: 6px !important;
  background: #17171a !important;
  border: 1px solid var(--line) !important;
  color: var(--ink-2) !important;
  font-size: 1.02rem !important;
}

/* ===================== Analysis Results (LLM output) ===================== */
.analysis-title{ margin-top: 22px !important; }

.result-card{
  background: var(--panel) !important;
  border: 1px solid var(--line) !important;
  border-radius: 14px !important;
  padding: 18px 18px 22px !important;
}

.analysis-section,
.analysis-section p,
.analysis-section li{ font-size: 1.22rem !important; line-height: 1.68 !important; }

.analysis-section h2{
  border-left: 4px solid var(--accent) !important;
  padding-left: 10px !important;
  color:#fff !important;
}

/* Code/pre blocks if model returns any */
.result-card pre, .result-card code{
  background: #111116 !important;
  border: 1px solid #2b2b35 !important;
  border-radius: 8px !important;
  padding: 10px 12px !important;
  font-size: .95rem !important;
}

/* ===================== Chat (Conversa) ===================== */
.chatbot-surface .wrap,
.chatbot-surface .gr-chatbot{
  background:#121215 !important;
  border:1px solid var(--line) !important;
  border-radius: 12px !important;
}
.gr-chatbot .message,
.chatbot-surface .message{ border-radius:12px !important; padding:10px 12px !important; line-height:1.5 !important; }
.gr-chatbot .message.user,
.gr-chatbot .message.role-user,
.chatbot-surface .message.user{ background:#1f2025 !important; border:1px solid #30303a !important; }
.gr-chatbot .message.bot,
.gr-chatbot .message.role-assistant,
.chatbot-surface .message.bot{
  background:#1a1533 !important; border:1px solid #2c2359 !important;
}

/* Disable copying in chat */
.chatbot-surface, .chatbot-surface *, .gr-chatbot, .gr-chatbot *,
.gr-chatbot .message, .gr-chatbot .message *,
div[data-testid*="chatbot"] *, div[data-testid*="chatbot"],
.gr-chatbot-message, .gr-chatbot-message *,
.message-content, .message-content *{
  -webkit-user-select:none !important; -moz-user-select:none !important; -ms-user-select:none !important; user-select:none !important;
  -webkit-touch-callout:none !important;
}
.chatbot-surface, .gr-chatbot{ -webkit-user-modify: read-only !important; }

/* ===================== Mobile ===================== */
@media (max-width: 768px){
  .gradio-container{ width: 94vw !important; padding: 10px !important; }
  .gr-button{ width: 100% !important; margin: 5px 0 !important; }
  .gr-textbox, .gr-dropdown{ font-size: 16px !important; }
  .analyze-cta{ min-width: 0 !important; }
}

/* ===================== Waiting Overlay ===================== */
.wait-overlay{
  position: fixed;
  inset: 0;
  z-index: 9999;
  display: flex;
  align-items: center;
  justify-content: center;
  /* Dim + blur everything behind */
  background: rgba(12,12,14,0.45);
  backdrop-filter: blur(6px) saturate(110%);
  -webkit-backdrop-filter: blur(6px) saturate(110%);
  pointer-events: all; /* block clicks */
}

.wait-card{
  width: min(560px, 92vw);
  background: rgba(21,21,23,0.90);
  border: 1px solid var(--line);
  border-radius: 16px;
  padding: 22px 24px;
  box-shadow: 0 10px 30px rgba(0,0,0,.35);
  text-align: center;
}

.wait-title{
  font-weight: 800;
  letter-spacing: .2px;
  margin-bottom: 14px;
  color: var(--ink);
  font-size: 1.1rem;
}

.wait-bar{
  position: relative;
  width: 100%;
  height: 10px;
  background: rgba(255,255,255,.08);
  border: 1px solid rgba(255,255,255,.12);
  border-radius: 999px;
  overflow: hidden;
  margin: 6px 0 8px;
}

.wait-bar .bar{
  position: absolute;
  top: 0; bottom: 0;
  left: -35%;
  width: 35%;
  border-radius: 999px;
  background: linear-gradient(90deg, rgba(255,255,255,.25), var(--accent), rgba(255,255,255,.25));
  animation: indeterminateBar 1.05s ease-in-out infinite;
}

@keyframes indeterminateBar{
  0%   { left: -35%; }
  50%  { left: 40%; }
  100% { left: 100%; }
}

.wait-tip{
  margin-top: 6px;
  color: var(--ink-2);
  opacity: .9;
  font-size: .98rem;
}
